(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,n){e.exports=n(59)},53:function(e,t,n){},55:function(e,t,n){},57:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(20),l=n.n(i),o=n(12),c=n.n(o),s=n(21),u=n(13),m=n(23),f=n(4),d=n(5),p=n(7),v=n(6),h=n(8),E=n(10),b=n(9),g=n(22),F=n.n(g),y=function(e){var t=e.title,n=e.version;return r.a.createElement("div",null,r.a.createElement("h1",null,t,r.a.createElement("span",{className:"lbl-version"},n)))},O=n(3),N=(n(53),function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).handleInput=function(e){n.props.addFiles(e.target.files),e.target.value=""},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"button-group"},r.a.createElement(S,{handleInput:this.handleInput}),r.a.createElement(w,{progState:this.props.progState,convert:this.props.convert}))}}]),t}(a.Component)),S=function(e){return r.a.createElement("div",null,r.a.createElement("input",{type:"file",className:"inputFile",name:"file[]",id:"file",onChange:e.handleInput,multiple:!0}),r.a.createElement("label",{htmlFor:"file",className:"button button-accent"},"Add Documents ",r.a.createElement(O.a,{icon:"plus-circle",size:"sm"})))},w=function(e){var t,n;return"default"===e.progState?(n="Convert ",t=r.a.createElement(O.a,{icon:"sync",size:"sm"})):(n="Converting ",t=r.a.createElement(O.a,{icon:"sync",size:"sm",spin:!0})),r.a.createElement("button",{className:"button button-primary align-right",onClick:function(){return e.convert()}},n,t)},j=N,R=(n(55),function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).handleDropInput=function(e){e.preventDefault(),e.stopPropagation(),n.props.addFiles(e.dataTransfer.files)},n.handleDragOver=function(e){e.preventDefault(),e.stopPropagation()},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.count,n=e.clearFiles,a=e.removeFile,i=e.files;return r.a.createElement("div",{className:"documentPanel",onDrop:this.handleDropInput,onDragOver:this.handleDragOver},r.a.createElement("div",{className:"info"},r.a.createElement(k,{count:t}),r.a.createElement(D,{clearFiles:n})),r.a.createElement("hr",null),r.a.createElement(C,{files:i,removeFile:a}))}}]),t}(a.Component)),k=function(e){return r.a.createElement("span",{className:"documentCount"+(0===e.count?" colorEmpty":"")},e.count," Documents")},D=function(e){return r.a.createElement("span",{className:"clearButton",onClick:e.clearFiles},r.a.createElement("span",null," "),r.a.createElement(O.a,{icon:"minus-circle",size:"sm"}))},C=function(e){var t=e.files.map(function(t,n){return r.a.createElement(L,{file:t,key:n,id:n,removeFile:e.removeFile})});return 0===t.length?r.a.createElement("div",{className:"dropIndicator"},r.a.createElement(O.a,{icon:"cloud-upload-alt",size:"5x"}),r.a.createElement("p",null," Drop Documents Here ")):r.a.createElement("ol",{className:"fileList"}," ",t," ")},L=function(e){var t=e.file;return r.a.createElement("li",{className:"file"},t.name,r.a.createElement("span",{className:"removeFile",onClick:function(){return e.removeFile(e.id)}},r.a.createElement(O.a,{icon:"trash",size:"sm",color:"#d8497d"})))},z=R,A={title:"DocTa",version:"v2",api_url:"/convert",default_download_name:"job.zip"},_={SERVER_NOT_AVAILABLE:"Server Not Running :( \nLooks like you need to run the server ('docta.py') again",SERVER_ERROR:"Server's Messed Up :(\nLook, it's not you, it's not me, it's the server. Something probably went wrong during conversion.\n Please contact my creator"};function I(e){(e=e.toString().toLowerCase()).includes("network")?alert(_.SERVER_NOT_AVAILABLE):e.includes("500")?alert(_.SERVER_ERROR):alert(e)}var x={downloadFile:function(e,t){var n=window.URL.createObjectURL(new Blob([e])),a=document.createElement("a");a.href=n,a.setAttribute("download",t),document.body.appendChild(a),a.click(),document.body.removeChild(a)},alertError:I,isWithinSizeLimits:function(e,t){return!(e.size/1e6>t)||(I("".concat(e.name," exceed the size limit: ").concat(t," megabytes")),!1)}};E.b.add(b.d,b.e,b.c,b.b,b.a);var B=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){return document.title=A.title},n.state=Object(m.a)({},{files:[],fileNames:[],progState:"default",sizeLimitMB:6,filterREGEX:/.docx/},A),n.addFiles=function(e){e=Array.from(e);var t=n.filterFiles(e);if(t){console.log(t);var a=Object(u.a)(n.state.files).concat(Object(u.a)(t));n.setState({files:a,fileNames:n.getFileNames(a)})}},n.filterFiles=function(e){return e.filter(function(e){return x.isWithinSizeLimits(e,n.state.sizeLimitMB)&n.state.filterREGEX.test(e.name)&!n.state.fileNames.includes(e.name)})},n.getFileNames=function(e){return e.map(function(e){return e.name})},n.removeFile=function(e){var t=n.state.files.filter(function(t,n){return n!==e});n.setState({files:t,fileNames:n.getFileNames(t)})},n.clearFiles=function(){n.setState({files:[],fileNames:[]})},n.convert=Object(s.a)(c.a.mark(function e(){var t,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({progState:"progress"}),t=new FormData,n.state.files.forEach(function(e){t.append("file[]",e)}),e.prev=3,e.next=6,F()({method:"post",url:n.state.api_url,data:t,responseType:"arraybuffer",config:{headers:{"Content-Type":"multipart/form-data"}}});case 6:a=e.sent,x.downloadFile(a.data,n.state.default_download_name),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),n.setState({progState:"default"}),x.alertError(e.t0);case 14:n.setState({progState:"default"});case 15:case"end":return e.stop()}},e,this,[[3,10]])})),n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(y,{title:this.state.title,version:this.state.version}),r.a.createElement(j,{progState:this.state.progState,addFiles:this.addFiles,convert:this.convert}),r.a.createElement(z,{count:this.state.files.length,clearFiles:this.clearFiles,addFiles:this.addFiles,removeFile:this.removeFile,files:this.state.files}))}}]),t}(a.Component);n(57);l.a.render(r.a.createElement(B,null),document.getElementById("root"))}},[[24,2,1]]]);
//# sourceMappingURL=main.071eec30.chunk.js.map